<!DOCTYPE html>
<html>
<head>
    <title>ESTP | Sovereign Minting Authority</title>
    <style>
        body { background: #0d1117; color: #c9d1d9; font-family: sans-serif; padding: 20px; }
        .grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 15px; }
        .card { background: #161b22; border: 1px solid #30363d; padding: 20px; border-radius: 8px; text-align: center; }
        .val { font-size: 24px; font-weight: bold; color: #58a6ff; margin: 10px 0; }
        .label { font-size: 12px; color: #8b949e; text-transform: uppercase; }
        .ledger { background: #010409; border: 1px solid #30363d; height: 350px; overflow-y: auto; padding: 15px; margin-top: 20px; font-family: monospace; }
        .tag { padding: 2px 5px; border-radius: 3px; font-weight: bold; font-size: 11px; margin-right: 10px; }
        .t-lock { background: #1f6feb; color: white; }
        .t-mint { background: #d29922; color: black; }
        .t-roi { background: #238636; color: white; }
    </style>
</head>
<body>

<h2 style="border-bottom: 1px solid #30363d; padding-bottom: 10px;">ESTP BANKING PORTAL: <span style="color:#238636">MINTING ACTIVE</span></h2>

<div class="grid">
    <div class="card">
        <div class="label">Public Locks (1.33x Collateral)</div>
        <div id="locks" class="val">$0</div>
        <div class="label">Account Class: Commercial</div>
    </div>
    <div class="card">
        <div class="label">Active Industrial Loans (ALI)</div>
        <div id="loans" class="val">$0</div>
        <div class="label" style="color:#f85149">Hard Cap: $1,000,000 (10%)</div>
    </div>
    <div class="card">
        <div class="label">Bank Fee Revenue (Wallet 1)</div>
        <div id="fees" class="val">$0</div>
        <div class="label">Capture Rate: 0.25%</div>
    </div>
</div>

<div class="ledger" id="ledger">
    <div>[SYSTEM READY] Awaiting 6-Hour Heartbeat...</div>
</div>

<script>
    // HARD-CODED CONSTANTS
    const RED_LINE_CAP = 1000000;
    const COLLATERAL_REQ = 1.3333; // To lend $1, we need $1.33 locked
    const LTV = 0.75;             // 75% Loan-to-Value

    let state = { locked: 0, loans: 0, fees: 0 };

    function log(type, css, msg) {
        const div = document.createElement('div');
        div.style.marginBottom = "8px";
        div.innerHTML = `<span class="tag ${css}">${type}</span> [${new Date().toLocaleTimeString()}] ${msg}`;
        const l = document.getElementById('ledger');
        l.insertBefore(div, l.firstChild);
    }

    function heartbeat() {
        // 1. Automated Purchase of Token A (The Lock)
        let lockIn = Math.floor(Math.random() * 40000) + 20000;
        let possibleLoan = lockIn * LTV;

        // REGULATOR CHECK: 10% Cap
        if (state.loans + possibleLoan <= RED_LINE_CAP) {
            state.locked += lockIn;
            log("LOCK", "t-lock", `Collateral Secured: $${lockIn.toLocaleString()} (1.33x Base)`);

            // 2. Automated Mint (The ALI Injection)
            state.loans += possibleLoan;
            state.fees += (possibleLoan * 0.0025);
            log("MINT", "t-mint", `Loan Authorized: $${possibleLoan.toLocaleString()} to Shipping Alpha`);

            // 3. Automated Flip (Industrial Completion)
            setTimeout(() => {
                let profit = possibleLoan * 0.072;
                state.loans -= possibleLoan;
                log("FLIP", "t-roi", `Shipment Successful. ROI Distributed in Token C. Principal Repaid.`);
                updateUI();
            }, 5000);
        } else {
            log("HOLD", "t-lock", "Red Line Cap Reached. Waiting for industrial settlement.");
        }
        updateUI();
    }

    function updateUI() {
        document.getElementById('locks').innerText = "$" + state.locked.toLocaleString();
        document.getElementById('loans').innerText = "$" + state.loans.toLocaleString();
        document.getElementById('fees').innerText = "$" + state.fees.toLocaleString();
    }

    setInterval(heartbeat, 4000);
</script>
</body>
</html>
